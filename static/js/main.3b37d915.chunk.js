(this["webpackJsonpfood-order-app"]=this["webpackJsonpfood-order-app"]||[]).push([[0],{56:function(e,t,a){},58:function(e,t,a){},60:function(e,t,a){},63:function(e,t,a){},65:function(e,t,a){},66:function(e,t,a){},67:function(e,t,a){},68:function(e,t,a){},69:function(e,t,a){"use strict";a.r(t);var c=a(0),n=a.n(c),r=a(14),s=a.n(r),l=(a(55),a(56),a(6)),i=a(76),o=a(71),j=a(47),d=a(75),u=n.a.createContext({meals:[],totalAmount:0,addMeal:function(e){},removeMeal:function(e){},clearCart:function(){}}),m=a(49),b=a(23),O=a.n(b),x=a(32),h=a(2),f=a(74),p=a(73),y=a(72),N=a(46),v=(a(58),a(1)),C=function(e){var t=e.cartItem,a=e.onAdd,c=e.onRemove,n="$".concat(t.price.toFixed(2));return Object(v.jsxs)(o.a,{className:"meal-container d-flex-row",children:[Object(v.jsxs)(y.a,{children:[Object(v.jsxs)(N.a,{sm:2,className:"cart-group-left-col",children:[Object(v.jsx)("p",{className:"cart-meal-name",children:t.name}),Object(v.jsx)("p",{className:"meal-price",children:n})]}),Object(v.jsx)(N.a,{sm:1,className:"cart-group-middle-col",children:Object(v.jsx)("div",{className:"mt-3 d-flex justify-content-end align-items-center",children:Object(v.jsx)("span",{children:Object(v.jsx)("button",{className:"cart-quantity-value",type:"text",children:"x".concat(t.quantity)})})})}),Object(v.jsx)(N.a,{sm:9,children:Object(v.jsxs)("div",{className:"cart-group-right-col d-flex justify-content-end",children:[Object(v.jsx)("button",{className:"cart-button-group",onClick:a,children:" + "}),Object(v.jsx)("button",{className:"cart-button-group",onClick:c,children:" - "})]})})]}),Object(v.jsx)("div",{className:"cart-line"})]})},g=(a(60),function(e){return""===e.trim()}),w=function(e){var t=e.showModal,a=e.onClickHandler,n=Object(c.useContext)(u),r=Object(c.useState)(!1),s=Object(l.a)(r,2),i=s[0],j=s[1],d=Object(c.useState)(!1),m=Object(l.a)(d,2),b=m[0],y=m[1],N=Object(c.useState)(!1),w=Object(l.a)(N,2),A=w[0],k=w[1],M=Object(c.useState)(null),S=Object(l.a)(M,2),q=S[0],E=S[1],I=Object(c.useState)({name:!0,street:!0,city:!0,postalCode:!0}),R=Object(l.a)(I,2),F=R[0],L=R[1],D=Object(c.useRef)(),T=Object(c.useRef)(),_=Object(c.useRef)(),B=Object(c.useRef)(),G="\u20ac".concat(n.totalAmount.toFixed(2)),H=n.meals.length>0,P=function(e){n.removeMeal(e)},J=function(e){n.addMeal(Object(h.a)(Object(h.a)({},e),{},{quantity:1}))},V=function(){var e=Object(x.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y(!0),e.prev=1,e.next=4,fetch("https://food-order-84b3e-default-rtdb.europe-west1.firebasedatabase.app/orders.json",{method:"POST",body:JSON.stringify({user:t,orderedMeals:n.meals})});case 4:if(e.sent.ok){e.next=10;break}throw k(!1),new Error("Something went wrong!");case 10:k(!0);case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),E(e.t0.message);case 16:y(!1),n.clearCart();case 18:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}(),Y=n.meals.map((function(e){return Object(v.jsx)(C,{cartItem:e,onAdd:J.bind(null,e),onRemove:P.bind(null,e.id)},e.id)})),z=Object(v.jsxs)(f.a,{className:"d-flex-row",children:[Object(v.jsxs)(f.a.Group,{className:"mb-2",controlId:"exampleForm.ControlInput1",children:[Object(v.jsx)(f.a.Label,{children:"Your Name"}),Object(v.jsx)(f.a.Control,{type:"text",ref:D}),!F.name&&Object(v.jsx)("p",{className:"error mt-2",children:"Name cannot be empty!"})]}),Object(v.jsxs)(f.a.Group,{className:"mb-2",controlId:"exampleForm.ControlInput1",children:[Object(v.jsx)(f.a.Label,{children:"Street"}),Object(v.jsx)(f.a.Control,{type:"text",ref:T}),!F.street&&Object(v.jsx)("p",{className:"error mt-2",children:"Street cannot be empty!"})]}),Object(v.jsxs)(f.a.Group,{className:"mb-2",controlId:"exampleForm.ControlInput1",children:[Object(v.jsx)(f.a.Label,{children:"Post Code"}),Object(v.jsx)(f.a.Control,{type:"text",ref:_}),!F.postalCode&&Object(v.jsx)("p",{className:"error mt-2",children:"Postal code must be 5 digit"})]}),Object(v.jsxs)(f.a.Group,{className:"mb-5",controlId:"exampleForm.ControlInput1",children:[Object(v.jsx)(f.a.Label,{children:"City"}),Object(v.jsx)(f.a.Control,{type:"text",ref:B}),!F.city&&Object(v.jsx)("p",{className:"error mt-2",children:"City cannot be empty"})]}),Object(v.jsxs)(o.a,{className:"cart-buttons d-flex justify-content-end",children:[Object(v.jsx)("button",{onClick:a,className:"close",children:"Cancel"}),H&&Object(v.jsx)("button",{type:"submit",className:"order",onClick:function(e){e.preventDefault();var t=D.current.value,a=T.current.value,c=_.current.value,n=B.current.value,r=!g(t),s=!g(a),l=!g(n),i=5===c.trim().length;(L({name:r,street:s,city:l,postalCode:i}),r&&s&&l&&i)&&(q||V({name:t,street:a,city:n,postalCode:c}))},children:"Confirm"})]}),q&&Object(v.jsx)("p",{className:"http-error",children:q})]}),$=Object(v.jsxs)(o.a,{className:"cart-buttons d-flex justify-content-end",children:[Object(v.jsx)("button",{onClick:a,className:"close",children:i?"Cancel":"Close"}),H&&Object(v.jsx)("button",{className:"order",onClick:function(){j(!0)},children:"Order"})]}),Q=Object(v.jsxs)(c.Fragment,{children:[Object(v.jsx)(p.a.Header,{closeButton:!0,className:"d-flex-row modal-header",children:Object(v.jsx)(p.a.Title,{className:"modal-title",children:"Cart Summary"})}),Object(v.jsxs)(p.a.Body,{className:"modal-body",children:[Object(v.jsx)(o.a,{className:"modal-list",children:Y}),Object(v.jsxs)(o.a,{className:"modal-total-price d-flex justify-content-between",children:[Object(v.jsx)("div",{children:"Total Amount:"}),Object(v.jsx)("div",{children:G})]}),i&&z,!i&&$]})]}),K=Object(v.jsx)(p.a.Body,{children:Object(v.jsx)("div",{className:"order-success d-flex justify-content-center align-items-center",children:Object(v.jsx)("p",{children:"Successfully sent the order!"})})});return Object(v.jsxs)(p.a,{className:"modal",size:"lg",show:t,onHide:a,children:[!b&&!A&&Q,A&&K]})},A=a.p+"static/media/meals.2971f633.jpg",k=(a(63),function(){var e=Object(c.useState)(!1),t=Object(l.a)(e,2),a=t[0],n=t[1],r=Object(c.useContext)(u).meals.reduce((function(e,t){return e+t.quantity}),0),s=function(){n((function(e){return!e}))};return Object(v.jsxs)(c.Fragment,{children:[a&&Object(v.jsx)(w,{showModal:a,onClickHandler:s}),Object(v.jsx)(i.a,{className:"header",children:Object(v.jsxs)(o.a,{className:"header-container",children:[Object(v.jsx)("h1",{className:"header-header",children:"ReactMeals"}),Object(v.jsx)(j.a,{children:Object(v.jsxs)(d.a,{className:"header-link",onClick:s,children:[Object(v.jsx)(m.a,{className:"header-cart-logo",size:50}),Object(v.jsx)("h4",{className:"header-cart-text",children:"Your Cart"}),Object(v.jsx)("h4",{className:"header-cart-quantity",children:r})]})})]})}),Object(v.jsx)("div",{className:"header-image",children:Object(v.jsx)("img",{src:A,alt:"meals"})})]})}),M=(a(65),function(e){var t=e.meal,a=Object(c.useRef)(),n=Object(c.useContext)(u),r="$".concat(t.price.toFixed(2));return Object(v.jsxs)(o.a,{className:"meal-container d-flex-row",children:[Object(v.jsxs)(y.a,{children:[Object(v.jsxs)(N.a,{className:"meal-group-left",children:[Object(v.jsx)("p",{className:"meal-name",children:t.name}),Object(v.jsx)("em",{className:"meal-description",children:t.description}),Object(v.jsx)("p",{className:"meal-price",children:r})]}),Object(v.jsxs)(N.a,{className:"meal-group-right",children:[Object(v.jsxs)("div",{className:"mt-3 d-flex justify-content-end align-items-center",children:[Object(v.jsx)("span",{className:"meal-amount",children:"Quantity"}),Object(v.jsx)("input",{ref:a,className:"meal-input",type:"number",defaultValue:"1",min:"1",max:"10"})]}),Object(v.jsx)("div",{className:"d-flex justify-content-end",children:Object(v.jsx)("button",{className:"meal-add-button",onClick:function(){var e=+a.current.value;n.addMeal({id:t.id,name:t.name,price:t.price,quantity:e})},children:"+ Add"})})]})]}),Object(v.jsx)("div",{className:"meal-line"})]})}),S=(a(66),function(e){var t=e.children;return Object(v.jsx)("div",{className:"card",children:t})}),q=a(77),E=function(){var e=Object(c.useState)([]),t=Object(l.a)(e,2),a=t[0],n=t[1],r=Object(c.useState)(!0),s=Object(l.a)(r,2),i=s[0],o=s[1],j=Object(c.useState)(null),d=Object(l.a)(j,2),u=d[0],m=d[1];if(Object(c.useEffect)((function(){(function(){var e=Object(x.a)(O.a.mark((function e(){var t,a,c,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://food-order-84b3e-default-rtdb.europe-west1.firebasedatabase.app/meals.json");case 2:if((t=e.sent).ok){e.next=5;break}throw new Error("Something went wrong!");case 5:return e.next=7,t.json();case 7:for(r in a=e.sent,c=[],a)c.push({id:r,name:a[r].name,description:a[r].description,price:a[r].price});n(c),o(!1);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()().catch((function(e){o(!1),m(e.message)}))}),[]),i)return Object(v.jsx)("h2",{style:{fontFamily:"Merienda One",textAlign:"center"},children:"Loading..."});if(u)return Object(v.jsx)("h2",{style:{fontFamily:"Merienda One",textAlign:"center",color:"red"},children:u});var b=a.map((function(e){return Object(v.jsx)(M,{meal:e},e.id)}));return Object(v.jsx)(S,{children:Object(v.jsx)(q.a,{children:b})})},I=(a(67),function(){return Object(v.jsxs)("section",{className:"summary",children:[Object(v.jsx)("h2",{children:"Delicious Food, Delivered To You"}),Object(v.jsx)("p",{children:"Choose your favorite meal from our broad selection of available meals and enjoy a delicious lunch or dinner at home."}),Object(v.jsx)("p",{children:"All our meals are cooked with high-quality ingredients, just-in-time and of course by experienced chefs!"})]})}),R=a(27),F={meals:[],totalAmount:0},L=function(e,t){if("ADD_MEAL"===t.type){var a,c=e.totalAmount+t.meal.price*t.meal.quantity,n=e.meals.findIndex((function(e){return e.id===t.meal.id})),r=e.meals[n];if(r){var s=Object(h.a)(Object(h.a)({},r),{},{quantity:r.quantity+t.meal.quantity});(a=Object(R.a)(e.meals))[n]=s}else a=e.meals.concat(t.meal);return{meals:a,totalAmount:c}}if("REMOVE_MEAL"===t.type){var l,i=e.meals.findIndex((function(e){return e.id===t.id})),o=e.meals[i],j=e.totalAmount-o.price;if(1===o.quantity)l=e.meals.filter((function(e){return e.id!==t.id}));else{var d=Object(h.a)(Object(h.a)({},o),{},{quantity:o.quantity-1});(l=Object(R.a)(e.meals))[i]=d}return{meals:l,totalAmount:j}}return t.type,F},D=function(e){var t=e.children,a=Object(c.useReducer)(L,F),n=Object(l.a)(a,2),r=n[0],s=n[1],i={meals:r.meals,totalAmount:r.totalAmount,addMeal:function(e){s({type:"ADD_MEAL",meal:e})},removeMeal:function(e){s({type:"REMOVE_MEAL",id:e})},clearCart:function(){s({type:"CLEAR_CART"})}};return Object(v.jsx)(u.Provider,{value:i,children:t})},T=(a(68),function(){var e=Object(c.useState)([]),t=Object(l.a)(e,2);t[0],t[1];return Object(v.jsxs)(D,{className:"App",children:[Object(v.jsx)(k,{}),Object(v.jsx)(I,{}),Object(v.jsx)(E,{})]})});s.a.render(Object(v.jsx)(n.a.StrictMode,{children:Object(v.jsx)(T,{})}),document.getElementById("root"))}},[[69,1,2]]]);
//# sourceMappingURL=main.3b37d915.chunk.js.map